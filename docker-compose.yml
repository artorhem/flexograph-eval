services:
  gapbs:
    privileged: true
    build:
      context: ./
      dockerfile: ./containers/GAPBS.Dockerfile
    container_name: gapbs
    volumes:
      - datasets:/datasets
      - results:/results
      - extra_space:/extra_space
  
  minigraph:
    privileged: true
    build:
      context: ./
      dockerfile: ./containers/minigraph.Dockerfile
    container_name: minigraph
    volumes:
      - datasets:/datasets
      - results:/results
        #- scratch:/scratch

  gemini:
    privileged: true
    build:
      context: ./
      dockerfile: ./containers/gemini.Dockerfile
    container_name: gemini
    volumes:
      - systems:/systems
      - datasets:/datasets
      - results:/results
  
  ligra:
    privileged: true
    build:
      context: ./
      dockerfile: ./containers/ligra.Dockerfile
    container_name: ligra
    volumes:
      - systems:/systems
      - datasets:/datasets
      - results:/results
      - extra_space:/extra_space

  galois:
    privileged: true
    build:
      context: ./
      dockerfile: ./containers/galois.Dockerfile
    container_name: galois
    volumes:
      - datasets:/datasets
      - results:/results
      - systems:/systems
      - extra_space:/extra_space
  
  blaze:
    privileged: true
    build:
      context: ./
      dockerfile: ./containers/blaze.Dockerfile
    container_name: blaze
    volumes:
      - datasets:/mnt/nvme
      - results:/results
  
  flexograph:
    privileged: true
    build:
      context: ./
      dockerfile: ./containers/Flexograph.Dockerfile
    container_name: flexograph
    volumes:
      - db:/db
      - systems:/systems
      - results:/results

  margraphita:
    privileged: true
    mem_limit: "1g"
    build:
      context: ./
      dockerfile: ../margraphita/Dockerfile
    container_name: margraphita
    volumes:
      - db:/db
      - margraphita:/margraphita
      - results:/results



volumes:
  systems:
    driver: local
    driver_opts:
      type: none
      o: bind
      device: ./systems/
  margraphita:
    driver: local
    driver_opts:
      type: none
      o: bind
      device: ../margraphita/
  datasets:
    driver: local
    driver_opts:
      type: none
      o: bind
      device: ./datasets/
  graph30:
    driver: local
    driver_opts:
      type: none
      o: bind
      device: /drives/graph30
  results:
    driver: local
    driver_opts:
      type: none
      o: bind
      device: ./results/
  extra_space:
    driver: local
    driver_opts:
      type: none
      o: bind
      device: ./extra_space/
  db:
    driver: local
    driver_opts:
      type: none
      o: bind
      device: ./db/
        #scratch:
        # driver: local
        # driver_opts:
        #type: none
        #o: bind
        #device: ./planar-scratch/
